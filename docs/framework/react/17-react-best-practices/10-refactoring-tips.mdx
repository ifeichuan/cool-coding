---
title: é‡æ„æŠ€å·§
description: å­¦ä¹ å¦‚ä½•åœ¨ React ä¸­åº”ç”¨é‡æ„æŠ€å·§ï¼Œæå‡ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ã€‚æœ¬æ–‡é€‚åˆåˆå­¦è€…ï¼ŒåŒ…å«æ¸…æ™°çš„è§£é‡Šã€ä»£ç ç¤ºä¾‹å’Œå®é™…æ¡ˆä¾‹ã€‚
---

## ä»‹ç»

é‡æ„æ˜¯æŒ‡åœ¨ä¸æ”¹å˜ä»£ç å¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œä¼˜åŒ–ä»£ç çš„å†…éƒ¨ç»“æ„ã€‚åœ¨ React ä¸­ï¼Œé‡æ„å¯ä»¥å¸®åŠ©ä½ æé«˜ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œç”šè‡³æ€§èƒ½ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼ŒæŒæ¡é‡æ„æŠ€å·§æ˜¯è¿ˆå‘é«˜æ•ˆå¼€å‘çš„é‡è¦ä¸€æ­¥ã€‚

æœ¬æ–‡å°†ä»‹ç»å‡ ç§å¸¸è§çš„ React é‡æ„æŠ€å·§ï¼Œå¹¶é€šè¿‡ä»£ç ç¤ºä¾‹å’Œå®é™…æ¡ˆä¾‹å¸®åŠ©ä½ ç†è§£å¦‚ä½•åº”ç”¨è¿™äº›æŠ€å·§ã€‚

---

## 1. æå–ç»„ä»¶

å½“ä¸€ä¸ªç»„ä»¶å˜å¾—è¿‡äºå¤æ‚æ—¶ï¼Œå¯ä»¥å°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶ã€‚è¿™ä¸ä»…ä½¿ä»£ç æ›´æ˜“äºç†è§£ï¼Œè¿˜èƒ½æé«˜ç»„ä»¶çš„å¤ç”¨æ€§ã€‚

### ç¤ºä¾‹

**é‡æ„å‰ï¼š**

```jsx
function UserProfile({ user }) {
  return (
    <div>
      <h1>{user.name}</h1>
      <p>{user.bio}</p>
      <img src={user.avatarUrl} alt={user.name} />
      <button onClick={() => alert(`Follow ${user.name}`)}>Follow</button>
    </div>
  );
}
```

**é‡æ„åï¼š**

```jsx
function UserAvatar({ user }) {
  return <img src={user.avatarUrl} alt={user.name} />;
}

function UserInfo({ user }) {
  return (
    <div>
      <h1>{user.name}</h1>
      <p>{user.bio}</p>
    </div>
  );
}

function FollowButton({ user }) {
  return <button onClick={() => alert(`Follow ${user.name}`)}>Follow</button>;
}

function UserProfile({ user }) {
  return (
    <div>
      <UserInfo user={user} />
      <UserAvatar user={user} />
      <FollowButton user={user} />
    </div>
  );
}
```

:::tip
é€šè¿‡æå–ç»„ä»¶ï¼Œ`UserProfile` å˜å¾—æ›´åŠ ç®€æ´ï¼Œæ¯ä¸ªå°ç»„ä»¶ä¹Ÿæ›´å®¹æ˜“æµ‹è¯•å’Œå¤ç”¨ã€‚
:::

---

## 2. ä½¿ç”¨è‡ªå®šä¹‰ Hook æå–é€»è¾‘

å½“å¤šä¸ªç»„ä»¶å…±äº«ç›¸åŒçš„é€»è¾‘æ—¶ï¼Œå¯ä»¥å°†è¿™äº›é€»è¾‘æå–åˆ°è‡ªå®šä¹‰ Hook ä¸­ã€‚è¿™æœ‰åŠ©äºå‡å°‘é‡å¤ä»£ç å¹¶æé«˜å¯ç»´æŠ¤æ€§ã€‚

### ç¤ºä¾‹

**é‡æ„å‰ï¼š**

```jsx
function ComponentA() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchData().then((response) => {
      setData(response);
      setLoading(false);
    });
  }, []);

  if (loading) return <div>Loading...</div>;
  return <div>{data}</div>;
}

function ComponentB() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchData().then((response) => {
      setData(response);
      setLoading(false);
    });
  }, []);

  if (loading) return <div>Loading...</div>;
  return <div>{data}</div>;
}
```

**é‡æ„åï¼š**

```jsx
function useFetchData() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchData().then((response) => {
      setData(response);
      setLoading(false);
    });
  }, []);

  return { data, loading };
}

function ComponentA() {
  const { data, loading } = useFetchData();
  if (loading) return <div>Loading...</div>;
  return <div>{data}</div>;
}

function ComponentB() {
  const { data, loading } = useFetchData();
  if (loading) return <div>Loading...</div>;
  return <div>{data}</div>;
}
```

:::note
è‡ªå®šä¹‰ Hook ä¸ä»…å‡å°‘äº†ä»£ç é‡å¤ï¼Œè¿˜ä½¿é€»è¾‘æ›´æ˜“äºæµ‹è¯•å’Œå¤ç”¨ã€‚
:::

---

## 3. ä½¿ç”¨ Context é¿å… Prop Drilling

å½“éœ€è¦åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€æ—¶ï¼Œä½¿ç”¨ `Context` å¯ä»¥é¿å…é€šè¿‡å¤šå±‚ç»„ä»¶ä¼ é€’ propsï¼ˆå³ prop drillingï¼‰ã€‚

### ç¤ºä¾‹

**é‡æ„å‰ï¼š**

```jsx
function App() {
  const [theme, setTheme] = useState("light");

  return (
    <div>
      <Header theme={theme} />
      <MainContent theme={theme} />
      <Footer theme={theme} />
    </div>
  );
}

function Header({ theme }) {
  return <header className={theme}>Header</header>;
}

function MainContent({ theme }) {
  return <main className={theme}>Main Content</main>;
}

function Footer({ theme }) {
  return <footer className={theme}>Footer</footer>;
}
```

**é‡æ„åï¼š**

```jsx
const ThemeContext = React.createContext();

function App() {
  const [theme, setTheme] = useState("light");

  return (
    <ThemeContext.Provider value={theme}>
      <div>
        <Header />
        <MainContent />
        <Footer />
      </div>
    </ThemeContext.Provider>
  );
}

function Header() {
  const theme = useContext(ThemeContext);
  return <header className={theme}>Header</header>;
}

function MainContent() {
  const theme = useContext(ThemeContext);
  return <main className={theme}>Main Content</main>;
}

function Footer() {
  const theme = useContext(ThemeContext);
  return <footer className={theme}>Footer</footer>;
}
```

:::caution
è™½ç„¶ `Context` å¾ˆæ–¹ä¾¿ï¼Œä½†è¿‡åº¦ä½¿ç”¨å¯èƒ½å¯¼è‡´ç»„ä»¶ä¾èµ–è¿‡å¤šï¼Œå½±å“æ€§èƒ½ã€‚ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ã€‚
:::

---

## 4. ä½¿ç”¨ Memoization ä¼˜åŒ–æ€§èƒ½

å½“ç»„ä»¶çš„æ¸²æŸ“å¼€é”€è¾ƒå¤§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `React.memo` æˆ– `useMemo` æ¥é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚

### ç¤ºä¾‹

**é‡æ„å‰ï¼š**

```jsx
function ExpensiveComponent({ data }) {
  // å‡è®¾è¿™æ˜¯ä¸€ä¸ªè®¡ç®—é‡å¾ˆå¤§çš„ç»„ä»¶
  const result = expensiveCalculation(data);
  return <div>{result}</div>;
}
```

**é‡æ„åï¼š**

```jsx
const ExpensiveComponent = React.memo(function ExpensiveComponent({ data }) {
  const result = useMemo(() => expensiveCalculation(data), [data]);
  return <div>{result}</div>;
});
```

:::warning
`React.memo` å’Œ `useMemo` åº”è°¨æ…ä½¿ç”¨ï¼Œè¿‡åº¦ä¼˜åŒ–å¯èƒ½å¯¼è‡´ä»£ç å¤æ‚åº¦å¢åŠ ã€‚
:::

---

## å®é™…æ¡ˆä¾‹ï¼šé‡æ„ä¸€ä¸ª Todo åº”ç”¨

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„ Todo åº”ç”¨ï¼Œä»¥ä¸‹æ˜¯é‡æ„å‰åçš„å¯¹æ¯”ï¼š

**é‡æ„å‰ï¼š**

```jsx
function TodoApp() {
  const [todos, setTodos] = useState([]);
  const [inputValue, setInputValue] = useState("");

  const addTodo = () => {
    setTodos([...todos, inputValue]);
    setInputValue("");
  };

  return (
    <div>
      <input
        value={inputValue}
        onChange={(e) => setInputValue(e.target.value)}
      />
      <button onClick={addTodo}>Add Todo</button>
      <ul>
        {todos.map((todo, index) => (
          <li key={index}>{todo}</li>
        ))}
      </ul>
    </div>
  );
}
```

**é‡æ„åï¼š**

```jsx
function TodoInput({ value, onChange, onAdd }) {
  return (
    <div>
      <input value={value} onChange={onChange} />
      <button onClick={onAdd}>Add Todo</button>
    </div>
  );
}

function TodoList({ todos }) {
  return (
    <ul>
      {todos.map((todo, index) => (
        <li key={index}>{todo}</li>
      ))}
    </ul>
  );
}

function TodoApp() {
  const [todos, setTodos] = useState([]);
  const [inputValue, setInputValue] = useState("");

  const addTodo = () => {
    setTodos([...todos, inputValue]);
    setInputValue("");
  };

  return (
    <div>
      <TodoInput
        value={inputValue}
        onChange={(e) => setInputValue(e.target.value)}
        onAdd={addTodo}
      />
      <TodoList todos={todos} />
    </div>
  );
}
```

:::tip
é€šè¿‡æå– `TodoInput` å’Œ `TodoList` ç»„ä»¶ï¼Œä»£ç å˜å¾—æ›´åŠ æ¨¡å—åŒ–å’Œæ˜“äºç»´æŠ¤ã€‚
:::

---

## æ€»ç»“

é‡æ„æ˜¯æå‡ä»£ç è´¨é‡çš„é‡è¦æ‰‹æ®µã€‚é€šè¿‡æå–ç»„ä»¶ã€ä½¿ç”¨è‡ªå®šä¹‰ Hookã€é¿å… prop drilling ä»¥åŠä¼˜åŒ–æ€§èƒ½ï¼Œä½ å¯ä»¥ä½¿ React åº”ç”¨æ›´åŠ é«˜æ•ˆå’Œå¯ç»´æŠ¤ã€‚

### é™„åŠ èµ„æº

- [React å®˜æ–¹æ–‡æ¡£](https://reactjs.org/docs/getting-started.html)
- [React Hooks æŒ‡å—](https://reactjs.org/docs/hooks-intro.html)
- [é‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡](https://refactoring.com/)

### ç»ƒä¹ 

1. å°è¯•å°†ä¸€ä¸ªå¤æ‚çš„ç»„ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶ã€‚
2. å°†å…±äº«é€»è¾‘æå–åˆ°è‡ªå®šä¹‰ Hook ä¸­ã€‚
3. ä½¿ç”¨ `Context` é‡æ„ä¸€ä¸ªéœ€è¦å¤šå±‚ä¼ é€’ props çš„åº”ç”¨ã€‚

Happy coding! ğŸš€