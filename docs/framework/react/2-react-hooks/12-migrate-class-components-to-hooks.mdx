---
title: ç±»ç»„ä»¶è¿ç§»åˆ°Hooks
description: å­¦ä¹ å¦‚ä½•å°†Reactç±»ç»„ä»¶è¿ç§»åˆ°å‡½æ•°ç»„ä»¶å¹¶ä½¿ç”¨Hooksï¼ŒæŒæ¡useStateã€useEffectç­‰æ ¸å¿ƒHooksçš„ä½¿ç”¨æ–¹æ³•ã€‚
---

## ä»‹ç»

åœ¨React 16.8ç‰ˆæœ¬ä¸­ï¼ŒHooksçš„å¼•å…¥å½»åº•æ”¹å˜äº†å¼€å‘è€…ç¼–å†™ç»„ä»¶çš„æ–¹å¼ã€‚Hookså…è®¸æˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€ï¼ˆstateï¼‰å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè€Œæ— éœ€ç¼–å†™ç±»ç»„ä»¶ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œç†è§£å¦‚ä½•å°†ç°æœ‰çš„ç±»ç»„ä»¶è¿ç§»åˆ°Hooksæ˜¯ä¸€ä¸ªé‡è¦çš„æŠ€èƒ½ã€‚æœ¬æ–‡å°†é€æ­¥å¼•å¯¼ä½ å®Œæˆè¿™ä¸€è¿‡ç¨‹ï¼Œå¹¶é€šè¿‡å®é™…æ¡ˆä¾‹å¸®åŠ©ä½ æŒæ¡Hooksçš„æ ¸å¿ƒæ¦‚å¿µã€‚

## ä¸ºä»€ä¹ˆè¿ç§»åˆ°Hooksï¼Ÿ

1. **ç®€åŒ–ä»£ç **ï¼šHooksä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼Œå‡å°‘äº†ç±»ç»„ä»¶ä¸­çš„æ ·æ¿ä»£ç ã€‚
2. **æ›´å¥½çš„é€»è¾‘å¤ç”¨**ï¼šHookså…è®¸ä½ å°†é€»è¾‘æå–åˆ°è‡ªå®šä¹‰Hooksä¸­ï¼Œä»è€Œæ›´å®¹æ˜“åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«é€»è¾‘ã€‚
3. **æ›´ç›´è§‚çš„API**ï¼šHooksæä¾›äº†ä¸€ç§æ›´ç›´è§‚çš„æ–¹å¼æ¥ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ï¼Œé¿å…äº†ç±»ç»„ä»¶ä¸­çš„`this`ç»‘å®šé—®é¢˜ã€‚

## ä»ç±»ç»„ä»¶åˆ°Hooksçš„è¿ç§»æ­¥éª¤

### 1. ä½¿ç”¨`useState`æ›¿æ¢`this.state`

åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨`this.state`æ¥ç®¡ç†ç»„ä»¶çš„çŠ¶æ€ã€‚åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`useState`æ¥å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚

#### ç±»ç»„ä»¶ç¤ºä¾‹

```jsx
class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }

  render() {
    return (
      <div>
        <p>You clicked {this.state.count} times</p>
        <button onClick={() => this.setState({ count: this.state.count + 1 })}>
          Click me
        </button>
      </div>
    );
  }
}
```

#### ä½¿ç”¨`useState`çš„å‡½æ•°ç»„ä»¶

```jsx
import React, { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

:::tip
`useState`è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å½“å‰çŠ¶æ€å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯æ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚ä½ å¯ä»¥é€šè¿‡è§£æ„èµ‹å€¼æ¥è·å–è¿™ä¸¤ä¸ªå€¼ã€‚
:::

### 2. ä½¿ç”¨`useEffect`æ›¿æ¢ç”Ÿå‘½å‘¨æœŸæ–¹æ³•

åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`componentDidMount`ã€`componentDidUpdate`å’Œ`componentWillUnmount`ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥å¤„ç†å‰¯ä½œç”¨ã€‚åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`useEffect`æ¥æ›¿ä»£è¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

#### ç±»ç»„ä»¶ç¤ºä¾‹

```jsx
class Timer extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      seconds: 0
    };
  }

  componentDidMount() {
    this.interval = setInterval(() => {
      this.setState({ seconds: this.state.seconds + 1 });
    }, 1000);
  }

  componentWillUnmount() {
    clearInterval(this.interval);
  }

  render() {
    return (
      <div>
        <p>Seconds: {this.state.seconds}</p>
      </div>
    );
  }
}
```

#### ä½¿ç”¨`useEffect`çš„å‡½æ•°ç»„ä»¶

```jsx
import React, { useState, useEffect } from 'react';

function Timer() {
  const [seconds, setSeconds] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => {
      setSeconds(seconds => seconds + 1);
    }, 1000);

    return () => clearInterval(interval);
  }, []);

  return (
    <div>
      <p>Seconds: {seconds}</p>
    </div>
  );
}
```

:::note
`useEffect`çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªä¾èµ–æ•°ç»„ã€‚å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œ`useEffect`åªä¼šåœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œï¼Œç±»ä¼¼äº`componentDidMount`å’Œ`componentWillUnmount`ã€‚
:::

### 3. ä½¿ç”¨è‡ªå®šä¹‰Hookså¤ç”¨é€»è¾‘

åœ¨ç±»ç»„ä»¶ä¸­ï¼Œå¤ç”¨é€»è¾‘é€šå¸¸éœ€è¦ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æˆ–æ¸²æŸ“å±æ€§ï¼ˆRender Propsï¼‰ã€‚åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰Hooksæ¥æ›´ç®€æ´åœ°å®ç°é€»è¾‘å¤ç”¨ã€‚

#### è‡ªå®šä¹‰Hookç¤ºä¾‹

```jsx
import { useState, useEffect } from 'react';

function useTimer(initialSeconds = 0) {
  const [seconds, setSeconds] = useState(initialSeconds);

  useEffect(() => {
    const interval = setInterval(() => {
      setSeconds(seconds => seconds + 1);
    }, 1000);

    return () => clearInterval(interval);
  }, []);

  return seconds;
}

function Timer() {
  const seconds = useTimer();

  return (
    <div>
      <p>Seconds: {seconds}</p>
    </div>
  );
}
```

:::caution
è‡ªå®šä¹‰Hooksçš„å‘½åå¿…é¡»ä»¥`use`å¼€å¤´ï¼Œè¿™æ ·Reactæ‰èƒ½è¯†åˆ«å®ƒæ˜¯ä¸€ä¸ªHookã€‚
:::

## å®é™…æ¡ˆä¾‹ï¼šè¿ç§»ä¸€ä¸ªå¤æ‚çš„ç±»ç»„ä»¶

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç±»ç»„ä»¶ï¼Œå®ƒä»APIè·å–æ•°æ®å¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚æˆ‘ä»¬å°†é€æ­¥å°†å…¶è¿ç§»åˆ°å‡½æ•°ç»„ä»¶å¹¶ä½¿ç”¨Hooksã€‚

### ç±»ç»„ä»¶

```jsx
class DataFetcher extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      data: null,
      loading: true,
      error: null
    };
  }

  componentDidMount() {
    fetch('https://api.example.com/data')
      .then(response => response.json())
      .then(data => this.setState({ data, loading: false }))
      .catch(error => this.setState({ error, loading: false }));
  }

  render() {
    const { data, loading, error } = this.state;

    if (loading) return <p>Loading...</p>;
    if (error) return <p>Error: {error.message}</p>;

    return (
      <div>
        <h1>Data:</h1>
        <pre>{JSON.stringify(data, null, 2)}</pre>
      </div>
    );
  }
}
```

### ä½¿ç”¨Hooksçš„å‡½æ•°ç»„ä»¶

```jsx
import React, { useState, useEffect } from 'react';

function DataFetcher() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetch('https://api.example.com/data')
      .then(response => response.json())
      .then(data => {
        setData(data);
        setLoading(false);
      })
      .catch(error => {
        setError(error);
        setLoading(false);
      });
  }, []);

  if (loading) return <p>Loading...</p>;
  if (error) return <p>Error: {error.message}</p>;

  return (
    <div>
      <h1>Data:</h1>
      <pre>{JSON.stringify(data, null, 2)}</pre>
    </div>
  );
}
```

:::warning
åœ¨ä½¿ç”¨`useEffect`æ—¶ï¼Œç¡®ä¿æ­£ç¡®å¤„ç†ä¾èµ–é¡¹ï¼Œä»¥é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“æˆ–å†…å­˜æ³„æ¼ã€‚
:::

## æ€»ç»“

é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•å°†Reactç±»ç»„ä»¶è¿ç§»åˆ°å‡½æ•°ç»„ä»¶å¹¶ä½¿ç”¨Hooksã€‚æˆ‘ä»¬æ¢è®¨äº†å¦‚ä½•ä½¿ç”¨`useState`ç®¡ç†çŠ¶æ€ã€å¦‚ä½•ä½¿ç”¨`useEffect`å¤„ç†å‰¯ä½œç”¨ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡è‡ªå®šä¹‰Hookså¤ç”¨é€»è¾‘ã€‚Hooksä¸ä»…ç®€åŒ–äº†ä»£ç ï¼Œè¿˜æä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½æ¥ç®¡ç†ç»„ä»¶çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸã€‚

## é™„åŠ èµ„æºä¸ç»ƒä¹ 

- **å®˜æ–¹æ–‡æ¡£**ï¼š[React Hooks æ–‡æ¡£](https://reactjs.org/docs/hooks-intro.html)
- **ç»ƒä¹ **ï¼šå°è¯•å°†ä½ ç°æœ‰çš„ç±»ç»„ä»¶è¿ç§»åˆ°å‡½æ•°ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨Hooksæ¥ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ã€‚
- **è¿›é˜¶**ï¼šæ¢ç´¢æ›´å¤šHooksï¼Œå¦‚`useContext`ã€`useReducer`å’Œ`useMemo`ï¼Œä»¥è¿›ä¸€æ­¥æå‡ä½ çš„ReactæŠ€èƒ½ã€‚

Happy coding! ğŸš€