---
title: Navigationç»„ä»¶
description: "äº†è§£ Android Jetpack ä¸­çš„ Navigation ç»„ä»¶ï¼ŒæŒæ¡å¦‚ä½•åœ¨åº”ç”¨ä¸­å®ç°é¡µé¢å¯¼èˆªã€‚æœ¬æ–‡å°†ä»åŸºç¡€æ¦‚å¿µåˆ°å®é™…åº”ç”¨ï¼Œé€æ­¥è®²è§£ Navigation ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€‚"
---

## ä»‹ç»

åœ¨ Android åº”ç”¨å¼€å‘ä¸­ï¼Œé¡µé¢ä¹‹é—´çš„å¯¼èˆªæ˜¯ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚Android Jetpack æä¾›äº† **Navigation ç»„ä»¶**ï¼Œå®ƒç®€åŒ–äº†é¡µé¢å¯¼èˆªçš„å®ç°ï¼Œå¸®åŠ©å¼€å‘è€…æ›´è½»æ¾åœ°ç®¡ç†åº”ç”¨çš„å¯¼èˆªé€»è¾‘ã€‚Navigation ç»„ä»¶ä¸ä»…æ”¯æŒ Fragment å’Œ Activity ä¹‹é—´çš„å¯¼èˆªï¼Œè¿˜æä¾›äº†ç»Ÿä¸€çš„ API æ¥å¤„ç†å¯¼èˆªæ ˆã€åŠ¨ç”»ã€å‚æ•°ä¼ é€’ç­‰ã€‚

æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹å­¦ä¹  Navigation ç»„ä»¶ï¼Œå¹¶é€šè¿‡å®é™…æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•åœ¨åº”ç”¨ä¸­ä½¿ç”¨å®ƒã€‚

---

## Navigation ç»„ä»¶çš„åŸºæœ¬æ¦‚å¿µ

Navigation ç»„ä»¶ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š

1. **NavGraphï¼ˆå¯¼èˆªå›¾ï¼‰**ï¼šä¸€ä¸ª XML æ–‡ä»¶ï¼Œå®šä¹‰äº†åº”ç”¨ä¸­çš„æ‰€æœ‰é¡µé¢ï¼ˆç›®çš„åœ°ï¼‰ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å¯¼èˆªå…³ç³»ã€‚
2. **NavController**ï¼šè´Ÿè´£ç®¡ç†å¯¼èˆªæ“ä½œçš„æ ¸å¿ƒç±»ï¼Œç”¨äºåœ¨å¯¼èˆªå›¾ä¸­åˆ‡æ¢ç›®çš„åœ°ã€‚
3. **NavHost**ï¼šä¸€ä¸ªå®¹å™¨ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰å¯¼èˆªå›¾ä¸­çš„ç›®çš„åœ°ï¼ˆé€šå¸¸æ˜¯ Fragment æˆ– Activityï¼‰ã€‚

:::tip
Navigation ç»„ä»¶æ”¯æŒ Fragment å’Œ Activity ä¹‹é—´çš„å¯¼èˆªï¼Œä½†æ¨èä½¿ç”¨ Fragment ä½œä¸ºä¸»è¦ç›®çš„åœ°ï¼Œå› ä¸º Fragment æ›´é€‚åˆæ„å»ºçµæ´»çš„ç”¨æˆ·ç•Œé¢ã€‚
:::

---

## è®¾ç½® Navigation ç»„ä»¶

### 1. æ·»åŠ ä¾èµ–

é¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„ `build.gradle` æ–‡ä»¶ä¸­æ·»åŠ  Navigation ç»„ä»¶çš„ä¾èµ–ï¼š

```groovy
dependencies {
    def nav_version = "2.7.7"
    implementation "androidx.navigation:navigation-fragment-ktx:$nav_version"
    implementation "androidx.navigation:navigation-ui-ktx:$nav_version"
}
```

### 2. åˆ›å»ºå¯¼èˆªå›¾

åœ¨ `res/navigation` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå¯¼èˆªå›¾æ–‡ä»¶ï¼ˆä¾‹å¦‚ `nav_graph.xml`ï¼‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¯¼èˆªå›¾ç¤ºä¾‹ï¼š

```xml
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/nav_graph"
    app:startDestination="@id/homeFragment">

    <fragment
        android:id="@+id/homeFragment"
        android:name="com.example.app.HomeFragment"
        android:label="Home" />

    <fragment
        android:id="@+id/detailFragment"
        android:name="com.example.app.DetailFragment"
        android:label="Detail" />
</navigation>
```

åœ¨è¿™ä¸ªå¯¼èˆªå›¾ä¸­ï¼Œ`homeFragment` æ˜¯èµ·å§‹ç›®çš„åœ°ï¼Œç”¨æˆ·å¯ä»¥ä» `homeFragment` å¯¼èˆªåˆ° `detailFragment`ã€‚

### 3. è®¾ç½® NavHost

åœ¨å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ  `NavHostFragment`ï¼Œä½œä¸ºå¯¼èˆªçš„å®¹å™¨ï¼š

```xml
<androidx.fragment.app.FragmentContainerView
    android:id="@+id/nav_host_fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:navGraph="@navigation/nav_graph"
    app:defaultNavHost="true" />
```

---

## å®ç°å¯¼èˆª

### 1. ä½¿ç”¨ NavController å¯¼èˆª

åœ¨ä»£ç ä¸­ï¼Œå¯ä»¥é€šè¿‡ `NavController` å®ç°é¡µé¢ä¹‹é—´çš„å¯¼èˆªã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä» `HomeFragment` å¯¼èˆªåˆ° `DetailFragment` çš„ç¤ºä¾‹ï¼š

```kotlin
class HomeFragment : Fragment() {
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        val navController = findNavController()
        val button = view.findViewById<Button>(R.id.navigate_button)
        button.setOnClickListener {
            navController.navigate(R.id.detailFragment)
        }
    }
}
```

### 2. ä¼ é€’å‚æ•°

Navigation ç»„ä»¶æ”¯æŒåœ¨å¯¼èˆªæ—¶ä¼ é€’å‚æ•°ã€‚ä¾‹å¦‚ï¼Œä» `HomeFragment` ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²åˆ° `DetailFragment`ï¼š

```xml
<navigation ...>
    <fragment
        android:id="@+id/detailFragment"
        android:name="com.example.app.DetailFragment"
        android:label="Detail">
        <argument
            android:name="itemId"
            app:argType="string" />
    </fragment>
</navigation>
```

åœ¨ `HomeFragment` ä¸­ä¼ é€’å‚æ•°ï¼š

```kotlin
button.setOnClickListener {
    val action = HomeFragmentDirections.actionHomeFragmentToDetailFragment("123")
    navController.navigate(action)
}
```

åœ¨ `DetailFragment` ä¸­æ¥æ”¶å‚æ•°ï¼š

```kotlin
class DetailFragment : Fragment() {
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        val args: DetailFragmentArgs by navArgs()
        val itemId = args.itemId
        // ä½¿ç”¨ itemId
    }
}
```

---

## å®é™…æ¡ˆä¾‹

å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥ä»å•†å“åˆ—è¡¨é¡µé¢ï¼ˆ`ProductListFragment`ï¼‰ç‚¹å‡»æŸä¸ªå•†å“ï¼Œè¿›å…¥å•†å“è¯¦æƒ…é¡µé¢ï¼ˆ`ProductDetailFragment`ï¼‰ã€‚ä»¥ä¸‹æ˜¯å®ç°æ­¥éª¤ï¼š

1. åœ¨å¯¼èˆªå›¾ä¸­å®šä¹‰ä¸¤ä¸ª Fragment å’Œå®ƒä»¬ä¹‹é—´çš„å¯¼èˆªå…³ç³»ã€‚
2. åœ¨ `ProductListFragment` ä¸­è®¾ç½®ç‚¹å‡»äº‹ä»¶ï¼Œé€šè¿‡ `NavController` å¯¼èˆªåˆ° `ProductDetailFragment` å¹¶ä¼ é€’å•†å“ IDã€‚
3. åœ¨ `ProductDetailFragment` ä¸­æ¥æ”¶å•†å“ ID å¹¶æ˜¾ç¤ºå•†å“è¯¦æƒ…ã€‚

:::note
åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿˜å¯ä»¥ç»“åˆ ViewModel å’Œ LiveData å®ç°æ•°æ®çš„å…±äº«å’Œæ›´æ–°ã€‚
:::

---

## æ€»ç»“

Navigation ç»„ä»¶æ˜¯ Android Jetpack ä¸­ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå®ƒç®€åŒ–äº†é¡µé¢å¯¼èˆªçš„å®ç°ï¼Œå¹¶æä¾›äº†ç»Ÿä¸€çš„ API æ¥å¤„ç†å¤æ‚çš„å¯¼èˆªé€»è¾‘ã€‚é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº† Navigation ç»„ä»¶çš„åŸºæœ¬ç”¨æ³•ï¼Œå¹¶èƒ½å¤Ÿåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨å®ƒã€‚

---

## é™„åŠ èµ„æºä¸ç»ƒä¹ 

- **å®˜æ–¹æ–‡æ¡£**ï¼š[Navigation ç»„ä»¶å®˜æ–¹æ–‡æ¡£](https://developer.android.com/guide/navigation)
- **ç»ƒä¹ **ï¼šå°è¯•åœ¨ä½ çš„é¡¹ç›®ä¸­å®ç°ä¸€ä¸ªåŒ…å« 3 ä¸ªé¡µé¢çš„å¯¼èˆªæµç¨‹ï¼Œå¹¶åœ¨é¡µé¢ä¹‹é—´ä¼ é€’å‚æ•°ã€‚
- **æ‰©å±•é˜…è¯»**ï¼šå­¦ä¹ å¦‚ä½•ä½¿ç”¨ Navigation ç»„ä»¶å®ç°åº•éƒ¨å¯¼èˆªæ å’ŒæŠ½å±‰å¯¼èˆªã€‚

Happy coding! ğŸš€