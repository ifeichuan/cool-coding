---
title: Androidé‡æ„æŠ€å·§
description: å­¦ä¹ å¦‚ä½•é€šè¿‡é‡æ„æŠ€å·§ä¼˜åŒ–Androidä»£ç ï¼Œæå‡ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ã€‚æœ¬æ–‡é€‚åˆåˆå­¦è€…ï¼ŒåŒ…å«å®é™…æ¡ˆä¾‹å’Œä»£ç ç¤ºä¾‹ã€‚
---

## ä»‹ç»

åœ¨Androidå¼€å‘ä¸­ï¼Œéšç€é¡¹ç›®çš„ä¸æ–­è¿­ä»£ï¼Œä»£ç å¯èƒ½ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚å’Œéš¾ä»¥ç»´æŠ¤ã€‚é‡æ„ï¼ˆRefactoringï¼‰æ˜¯ä¸€ç§åœ¨ä¸æ”¹å˜ä»£ç å¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œä¼˜åŒ–ä»£ç ç»“æ„ã€æé«˜ä»£ç è´¨é‡çš„æŠ€æœ¯ã€‚é€šè¿‡é‡æ„ï¼Œä½ å¯ä»¥è®©ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“äºç†è§£å’Œæ‰©å±•ã€‚

æœ¬æ–‡å°†ä»‹ç»ä¸€äº›å¸¸è§çš„Androidé‡æ„æŠ€å·§ï¼Œå¸®åŠ©ä½ ç¼–å†™æ›´é«˜è´¨é‡çš„ä»£ç ã€‚

---

## 1. æå–æ–¹æ³•ï¼ˆExtract Methodï¼‰

### ä»€ä¹ˆæ˜¯æå–æ–¹æ³•ï¼Ÿ
æå–æ–¹æ³•æ˜¯æŒ‡å°†ä¸€æ®µä»£ç ä»ä¸€ä¸ªè¾ƒå¤§çš„æ–¹æ³•ä¸­æå–å‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ã€‚è¿™æ ·å¯ä»¥å‡å°‘æ–¹æ³•çš„å¤æ‚åº¦ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¤ç”¨æ€§ã€‚

### ç¤ºä¾‹
å‡è®¾ä½ æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·ç™»å½•çš„é€»è¾‘ï¼š

```kotlin
fun login(username: String, password: String) {
    if (username.isEmpty() || password.isEmpty()) {
        Toast.makeText(this, "ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©º", Toast.LENGTH_SHORT).show()
        return
    }

    if (username != "admin" || password != "123456") {
        Toast.makeText(this, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯", Toast.LENGTH_SHORT).show()
        return
    }

    Toast.makeText(this, "ç™»å½•æˆåŠŸ", Toast.LENGTH_SHORT).show()
}
```

é€šè¿‡æå–æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¾“å…¥éªŒè¯çš„é€»è¾‘æå–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ä¸­ï¼š

```kotlin
fun login(username: String, password: String) {
    if (!validateInput(username, password)) {
        return
    }

    if (!authenticate(username, password)) {
        return
    }

    Toast.makeText(this, "ç™»å½•æˆåŠŸ", Toast.LENGTH_SHORT).show()
}

private fun validateInput(username: String, password: String): Boolean {
    if (username.isEmpty() || password.isEmpty()) {
        Toast.makeText(this, "ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©º", Toast.LENGTH_SHORT).show()
        return false
    }
    return true
}

private fun authenticate(username: String, password: String): Boolean {
    if (username != "admin" || password != "123456") {
        Toast.makeText(this, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯", Toast.LENGTH_SHORT).show()
        return false
    }
    return true
}
```

### ä¼˜ç‚¹
- æé«˜äº†ä»£ç çš„å¯è¯»æ€§ã€‚
- å‡å°‘äº†é‡å¤ä»£ç ã€‚
- ä¾¿äºå•å…ƒæµ‹è¯•ã€‚

---

## 2. ä½¿ç”¨Kotlinæ‰©å±•å‡½æ•°

### ä»€ä¹ˆæ˜¯æ‰©å±•å‡½æ•°ï¼Ÿ
Kotlinçš„æ‰©å±•å‡½æ•°å…è®¸ä½ ä¸ºç°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œè€Œæ— éœ€ä¿®æ”¹ç±»çš„æºä»£ç ã€‚è¿™åœ¨Androidå¼€å‘ä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥å¸®åŠ©ä½ ç®€åŒ–ä»£ç ã€‚

### ç¤ºä¾‹
å‡è®¾ä½ ç»å¸¸éœ€è¦åœ¨Activityä¸­æ˜¾ç¤ºToastæ¶ˆæ¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼š

```kotlin
fun Context.showToast(message: String) {
    Toast.makeText(this, message, Toast.LENGTH_SHORT).show()
}
```

ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•Contextå¯¹è±¡ä¸Šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š

```kotlin
showToast("ç™»å½•æˆåŠŸ")
```

### ä¼˜ç‚¹
- å‡å°‘äº†é‡å¤ä»£ç ã€‚
- ä½¿ä»£ç æ›´å…·è¡¨è¾¾åŠ›ã€‚

---

## 3. ä½¿ç”¨æ•°æ®ç±»ï¼ˆData Classï¼‰

### ä»€ä¹ˆæ˜¯æ•°æ®ç±»ï¼Ÿ
Kotlinçš„æ•°æ®ç±»æ˜¯ä¸€ç§ä¸“é—¨ç”¨äºå­˜å‚¨æ•°æ®çš„ç±»ã€‚å®ƒå¯ä»¥è‡ªåŠ¨ç”Ÿæˆ`toString()`ã€`equals()`ã€`hashCode()`å’Œ`copy()`ç­‰æ–¹æ³•ï¼Œéå¸¸é€‚åˆç”¨äºæ¨¡å‹ç±»ã€‚

### ç¤ºä¾‹
å‡è®¾ä½ æœ‰ä¸€ä¸ªç”¨æˆ·ç±»ï¼š

```kotlin
class User(val name: String, val age: Int)
```

å°†å…¶é‡æ„ä¸ºæ•°æ®ç±»ï¼š

```kotlin
data class User(val name: String, val age: Int)
```

ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨`copy()`æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·å¯¹è±¡ï¼š

```kotlin
val user = User("Alice", 25)
val updatedUser = user.copy(age = 26)
```

### ä¼˜ç‚¹
- å‡å°‘äº†æ ·æ¿ä»£ç ã€‚
- æä¾›äº†ä¾¿æ·çš„æ–¹æ³•æ¥æ“ä½œæ•°æ®ã€‚

---

## 4. ä½¿ç”¨LiveDataå’ŒViewModel

### ä»€ä¹ˆæ˜¯LiveDataå’ŒViewModelï¼Ÿ
LiveDataæ˜¯ä¸€ç§å¯è§‚å¯Ÿçš„æ•°æ®æŒæœ‰è€…ï¼Œé€šå¸¸ä¸ViewModelä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºåœ¨UIç»„ä»¶ï¼ˆå¦‚Activityæˆ–Fragmentï¼‰ä¹‹é—´å…±äº«æ•°æ®ã€‚ViewModelè´Ÿè´£ç®¡ç†UIç›¸å…³çš„æ•°æ®ï¼Œå¹¶åœ¨é…ç½®æ›´æ”¹ï¼ˆå¦‚å±å¹•æ—‹è½¬ï¼‰æ—¶ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚

### ç¤ºä¾‹
å‡è®¾ä½ æœ‰ä¸€ä¸ªActivityï¼Œéœ€è¦ä»ç½‘ç»œåŠ è½½ç”¨æˆ·æ•°æ®ï¼š

```kotlin
class UserActivity : AppCompatActivity() {
    private lateinit var userViewModel: UserViewModel

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        userViewModel = ViewModelProvider(this).get(UserViewModel::class.java)

        userViewModel.user.observe(this, Observer { user ->
            // æ›´æ–°UI
        })

        userViewModel.loadUser()
    }
}
```

ViewModelçš„å®ç°ï¼š

```kotlin
class UserViewModel : ViewModel() {
    private val _user = MutableLiveData<User>()
    val user: LiveData<User> get() = _user

    fun loadUser() {
        // ä»ç½‘ç»œåŠ è½½ç”¨æˆ·æ•°æ®
        _user.value = User("Alice", 25)
    }
}
```

### ä¼˜ç‚¹
- åˆ†ç¦»äº†UIé€»è¾‘å’Œæ•°æ®é€»è¾‘ã€‚
- åœ¨é…ç½®æ›´æ”¹æ—¶ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚

---

## 5. ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰

### ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ
ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå°†å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ä»ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ã€‚åœ¨Androidå¼€å‘ä¸­ï¼Œå¸¸ç”¨çš„ä¾èµ–æ³¨å…¥æ¡†æ¶åŒ…æ‹¬Daggerå’ŒHiltã€‚

### ç¤ºä¾‹
å‡è®¾ä½ æœ‰ä¸€ä¸ªéœ€è¦ç½‘ç»œæœåŠ¡çš„ç±»ï¼š

```kotlin
class UserRepository(private val apiService: ApiService) {
    fun getUser(): User {
        return apiService.getUser()
    }
}
```

ä½¿ç”¨Hiltè¿›è¡Œä¾èµ–æ³¨å…¥ï¼š

```kotlin
@Module
@InstallIn(SingletonComponent::class)
object AppModule {
    @Provides
    fun provideApiService(): ApiService {
        return Retrofit.Builder()
            .baseUrl("https://api.example.com/")
            .build()
            .create(ApiService::class.java)
    }
}

@AndroidEntryPoint
class UserActivity : AppCompatActivity() {
    @Inject
    lateinit var userRepository: UserRepository

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        val user = userRepository.getUser()
    }
}
```

### ä¼˜ç‚¹
- å‡å°‘äº†ç±»ä¹‹é—´çš„è€¦åˆã€‚
- ä¾¿äºå•å…ƒæµ‹è¯•ã€‚

---

## å®é™…æ¡ˆä¾‹

å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥åœ¨åº”ç”¨ä¸­æµè§ˆå•†å“ã€æ·»åŠ åˆ°è´­ç‰©è½¦å¹¶ä¸‹å•ã€‚éšç€åŠŸèƒ½çš„å¢åŠ ï¼Œä»£ç å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚é€šè¿‡åº”ç”¨ä¸Šè¿°é‡æ„æŠ€å·§ï¼Œä½ å¯ä»¥ï¼š

1. æå–æ–¹æ³•ï¼šå°†å•†å“å±•ç¤ºé€»è¾‘å’Œè´­ç‰©è½¦é€»è¾‘åˆ†ç¦»ã€‚
2. ä½¿ç”¨æ‰©å±•å‡½æ•°ï¼šç®€åŒ–Toastå’ŒSnackbarçš„æ˜¾ç¤ºã€‚
3. ä½¿ç”¨æ•°æ®ç±»ï¼šå®šä¹‰å•†å“å’Œè®¢å•çš„æ¨¡å‹ã€‚
4. ä½¿ç”¨LiveDataå’ŒViewModelï¼šç®¡ç†å•†å“åˆ—è¡¨å’Œè´­ç‰©è½¦æ•°æ®ã€‚
5. ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼šæ³¨å…¥ç½‘ç»œæœåŠ¡å’Œæ•°æ®åº“è®¿é—®å¯¹è±¡ã€‚

---

## æ€»ç»“

é‡æ„æ˜¯Androidå¼€å‘ä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡æå–æ–¹æ³•ã€ä½¿ç”¨æ‰©å±•å‡½æ•°ã€æ•°æ®ç±»ã€LiveDataå’ŒViewModelä»¥åŠä¾èµ–æ³¨å…¥ï¼Œä½ å¯ä»¥æ˜¾è‘—æé«˜ä»£ç çš„è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚å¸Œæœ›æœ¬æ–‡çš„å†…å®¹èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™äº›æŠ€å·§ã€‚

---

## é™„åŠ èµ„æº

- [Kotlinå®˜æ–¹æ–‡æ¡£](https://kotlinlang.org/docs/home.html)
- [Androidå¼€å‘è€…æŒ‡å—](https://developer.android.com/guide)
- [Daggerå®˜æ–¹æ–‡æ¡£](https://dagger.dev/dev-guide/)
- [Hiltå®˜æ–¹æ–‡æ¡£](https://developer.android.com/training/dependency-injection/hilt-android)

---

## ç»ƒä¹ 

1. å°è¯•å°†ä½ é¡¹ç›®ä¸­çš„ä¸€ä¸ªå¤æ‚æ–¹æ³•æ‹†åˆ†ä¸ºå¤šä¸ªå°æ–¹æ³•ã€‚
2. ä¸ºå¸¸ç”¨çš„UIæ“ä½œï¼ˆå¦‚æ˜¾ç¤ºToastï¼‰åˆ›å»ºæ‰©å±•å‡½æ•°ã€‚
3. å°†ä½ çš„æ¨¡å‹ç±»é‡æ„ä¸ºæ•°æ®ç±»ã€‚
4. ä½¿ç”¨LiveDataå’ŒViewModelé‡æ„ä¸€ä¸ªActivityæˆ–Fragmentã€‚
5. å°è¯•åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨Hiltè¿›è¡Œä¾èµ–æ³¨å…¥ã€‚

Happy coding! ğŸš€