---
title: Go å­—ç¬¦ä¸²æ„å»ºå™¨
description: äº†è§£å¦‚ä½•åœ¨Goä¸­ä½¿ç”¨å­—ç¬¦ä¸²æ„å»ºå™¨é«˜æ•ˆåœ°æ‹¼æ¥å’Œæ“ä½œå­—ç¬¦ä¸²ã€‚
---

# Go å­—ç¬¦ä¸²æ„å»ºå™¨

åœ¨Goè¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°±æ— æ³•ç›´æ¥ä¿®æ”¹å®ƒçš„å†…å®¹ã€‚æ¯æ¬¡å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥æˆ–ä¿®æ”¹æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦é¢‘ç¹æ‹¼æ¥å­—ç¬¦ä¸²çš„åœºæ™¯ä¸­ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒGoæä¾›äº†`strings.Builder`ç±»å‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬é«˜æ•ˆåœ°æ„å»ºå’Œæ“ä½œå­—ç¬¦ä¸²ã€‚

## ä»€ä¹ˆæ˜¯`strings.Builder`ï¼Ÿ

`strings.Builder`æ˜¯Goæ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªç±»å‹ï¼Œä¸“é—¨ç”¨äºé«˜æ•ˆåœ°æ„å»ºå­—ç¬¦ä¸²ã€‚å®ƒé€šè¿‡å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¯å˜çš„å­—èŠ‚åˆ‡ç‰‡ï¼ˆ`[]byte`ï¼‰æ¥é¿å…é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œå¤åˆ¶æ“ä½œã€‚ä½¿ç”¨`strings.Builder`å¯ä»¥æ˜¾è‘—æé«˜å­—ç¬¦ä¸²æ‹¼æ¥çš„æ€§èƒ½ã€‚

### åŸºæœ¬ç”¨æ³•

è¦ä½¿ç”¨`strings.Builder`ï¼Œé¦–å…ˆéœ€è¦å¯¼å…¥`strings`åŒ…ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª`strings.Builder`å®ä¾‹ã€‚æ¥ä¸‹æ¥ï¼Œå¯ä»¥ä½¿ç”¨`WriteString`ã€`WriteByte`æˆ–`WriteRune`ç­‰æ–¹æ³•å‘æ„å»ºå™¨ä¸­æ·»åŠ å†…å®¹ã€‚æœ€åï¼Œè°ƒç”¨`String`æ–¹æ³•è·å–æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚

```go
package main

import (
    "fmt"
    "strings"
)

func main() {
    var builder strings.Builder

    builder.WriteString("Hello, ")
    builder.WriteString("World!")
    builder.WriteByte(' ')
    builder.WriteRune('ğŸ‘‹')

    result := builder.String()
    fmt.Println(result) // è¾“å‡º: Hello, World! ğŸ‘‹
}
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª`strings.Builder`å®ä¾‹ï¼Œå¹¶ä½¿ç”¨`WriteString`ã€`WriteByte`å’Œ`WriteRune`æ–¹æ³•å‘å…¶ä¸­æ·»åŠ å†…å®¹ã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨`String`æ–¹æ³•è·å–æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚

### æ€§èƒ½ä¼˜åŠ¿

ä¸ç›´æ¥ä½¿ç”¨`+`æ“ä½œç¬¦æ‹¼æ¥å­—ç¬¦ä¸²ç›¸æ¯”ï¼Œ`strings.Builder`åœ¨æ€§èƒ½ä¸Šæœ‰æ˜¾è‘—çš„ä¼˜åŠ¿ã€‚æ¯æ¬¡ä½¿ç”¨`+`æ“ä½œç¬¦æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¼šå¯¼è‡´å¤§é‡çš„å†…å­˜åˆ†é…å’Œå¤åˆ¶æ“ä½œã€‚è€Œ`strings.Builder`é€šè¿‡å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¯å˜çš„å­—èŠ‚åˆ‡ç‰‡ï¼Œé¿å…äº†è¿™äº›å¼€é”€ã€‚

```go
package main

import (
    "fmt"
    "strings"
    "time"
)

func main() {
    start := time.Now()

    var builder strings.Builder
    for i := 0; i < 100000; i++ {
        builder.WriteString("a")
    }
    result := builder.String()

    elapsed := time.Since(start)
    fmt.Printf("strings.Builder: %s\n", elapsed)

    start = time.Now()

    var s string
    for i := 0; i < 100000; i++ {
        s += "a"
    }

    elapsed = time.Since(start)
    fmt.Printf("+ operator: %s\n", elapsed)
}
```

è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä½ ä¼šå‘ç°ä½¿ç”¨`strings.Builder`çš„æ€§èƒ½è¿œè¿œä¼˜äºç›´æ¥ä½¿ç”¨`+`æ“ä½œç¬¦ã€‚

### å®é™…åº”ç”¨åœºæ™¯

`strings.Builder`åœ¨è®¸å¤šå®é™…åœºæ™¯ä¸­éƒ½éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åŠ¨æ€æ„å»ºå­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š

1. **æ—¥å¿—è®°å½•**ï¼šåœ¨è®°å½•æ—¥å¿—æ—¶ï¼Œå¯èƒ½éœ€è¦å°†å¤šä¸ªå­—æ®µæ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„æ—¥å¿—æ¶ˆæ¯ã€‚ä½¿ç”¨`strings.Builder`å¯ä»¥é«˜æ•ˆåœ°å®Œæˆè¿™ä¸€ä»»åŠ¡ã€‚

2. **ç”ŸæˆHTMLæˆ–JSON**ï¼šåœ¨ç”ŸæˆHTMLæˆ–JSONå­—ç¬¦ä¸²æ—¶ï¼Œé€šå¸¸éœ€è¦å°†å¤šä¸ªéƒ¨åˆ†æ‹¼æ¥åœ¨ä¸€èµ·ã€‚`strings.Builder`å¯ä»¥å¸®åŠ©ä½ é«˜æ•ˆåœ°æ„å»ºè¿™äº›å­—ç¬¦ä¸²ã€‚

3. **æ–‡ä»¶è·¯å¾„æ‹¼æ¥**ï¼šåœ¨æ„å»ºæ–‡ä»¶è·¯å¾„æ—¶ï¼Œå¯èƒ½éœ€è¦å°†å¤šä¸ªè·¯å¾„ç‰‡æ®µæ‹¼æ¥åœ¨ä¸€èµ·ã€‚`strings.Builder`å¯ä»¥ç¡®ä¿è¿™ä¸€è¿‡ç¨‹é«˜æ•ˆä¸”å®‰å…¨ã€‚

### æ€»ç»“

`strings.Builder`æ˜¯Goè¯­è¨€ä¸­ç”¨äºé«˜æ•ˆæ„å»ºå­—ç¬¦ä¸²çš„å¼ºå¤§å·¥å…·ã€‚å®ƒé€šè¿‡å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå¯å˜çš„å­—èŠ‚åˆ‡ç‰‡ï¼Œé¿å…äº†é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œå¤åˆ¶æ“ä½œï¼Œä»è€Œæ˜¾è‘—æé«˜äº†å­—ç¬¦ä¸²æ‹¼æ¥çš„æ€§èƒ½ã€‚åœ¨éœ€è¦é¢‘ç¹æ‹¼æ¥å­—ç¬¦ä¸²çš„åœºæ™¯ä¸­ï¼Œ`strings.Builder`æ˜¯ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚

### é™„åŠ èµ„æºä¸ç»ƒä¹ 

- **å®˜æ–¹æ–‡æ¡£**ï¼šé˜…è¯»[`strings.Builder`çš„å®˜æ–¹æ–‡æ¡£](https://pkg.go.dev/strings#Builder)ä»¥äº†è§£æ›´å¤šç»†èŠ‚ã€‚
- **ç»ƒä¹ **ï¼šå°è¯•ä½¿ç”¨`strings.Builder`ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå°†å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„å¥å­ï¼Œå¹¶æ¯”è¾ƒå…¶ä¸ç›´æ¥ä½¿ç”¨`+`æ“ä½œç¬¦çš„æ€§èƒ½å·®å¼‚ã€‚

:::tip
åœ¨ä½¿ç”¨`strings.Builder`æ—¶ï¼Œå°½é‡é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹è°ƒç”¨`String`æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´é¢å¤–çš„å†…å­˜åˆ†é…ã€‚åªæœ‰åœ¨æœ€ç»ˆéœ€è¦è·å–å­—ç¬¦ä¸²æ—¶æ‰è°ƒç”¨`String`æ–¹æ³•ã€‚
:::

:::caution
`strings.Builder`ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœåœ¨å¤šä¸ªgoroutineä¸­åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ª`strings.Builder`å®ä¾‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ç«äº‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨é€‚å½“çš„åŒæ­¥æœºåˆ¶ï¼ˆå¦‚`sync.Mutex`ï¼‰æ¥ä¿æŠ¤`strings.Builder`ã€‚
:::